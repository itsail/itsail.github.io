<!DOCTYPE html><html lang="ru"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title> Организация кода для CSS-препроцессора</title><meta name="description" content="Недавно прочитал статью на Frontender Magazine «организация кода для CSS препроцессоров», в которой рассказывается о нескольких вариантах организации файлово..."><link rel="alternate" type="application/rss+xml" title="ITSail" href="/feed.xml"><link rel="canonical" href="https://blog.itsail.ru/blog/organization-code-for-css-preprocessor/"><meta name="google-site-verification" content=""><meta name="yandex-verification" content="47167892cb6faab8" /><link href='https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans+Narrow:700&subset=latin,cyrillic' rel='stylesheet' type='text/css'><link rel="stylesheet" href="/assets/styles/main.css"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" /><meta property="og:url" content="https://blog.itsail.ru/blog/organization-code-for-css-preprocessor/"><meta property="og:type" content="website"><meta property="og:title" content="Организация кода для CSS-препроцессора"><meta property="og:description" content="Недавно прочитал статью на Frontender Magazine «организация кода для CSS препроцессоров»..."><meta property="og:site_name" content="ITSail"><meta name="twitter:card" content="summary"><meta name="twitter:url" content="https://blog.itsail.ru/blog/organization-code-for-css-preprocessor/"><meta name="twitter:title" content="Организация кода для CSS-препроцессора"><meta name="twitter:description" content="Недавно прочитал статью на Frontender Magazine «организация кода для CSS препроцессоров»..."><meta property="og:image" content="https://blog.itsail.ru/assets/images/2019/organization_code_for_css_preprocessor_index.jpg"><meta name="twitter:image" content="https://blog.itsail.ru/assets/images/2019/organization_code_for_css_preprocessor_index.jpg"><meta property="og:image" content="https://blog.itsail.ru/assets/images/2019/organization_code_for_css_preprocessor_537x240.jpg"><meta name="twitter:image" content="https://blog.itsail.ru/assets/images/2019/organization_code_for_css_preprocessor_537x240.jpg"><meta property="og:image" content="https://blog.itsail.ru/assets/images/2019/organization_code_for_css_preprocessor_1200x630.jpg"><meta name="twitter:image" content="https://blog.itsail.ru/assets/images/2019/organization_code_for_css_preprocessor_1200x630.jpg"><meta property="og:image" content="https://blog.itsail.ru/assets/images/2019/organization_code_for_css_preprocessor_1080x1080.jpg"><meta name="twitter:image" content="https://blog.itsail.ru/assets/images/2019/organization_code_for_css_preprocessor_1080x1080.jpg"><meta property="og:image" content="https://blog.itsail.ru/assets/images/2019/organization_code_for_css_preprocessor_1680x1680.jpg"><meta name="twitter:image" content="https://blog.itsail.ru/assets/images/2019/organization_code_for_css_preprocessor_1680x1680.jpg"><meta property="og:image" content="https://blog.itsail.ru/assets/images/2019/organization_code_for_css_preprocessor_1024x512.jpg"><meta name="twitter:image" content="https://blog.itsail.ru/assets/images/2019/organization_code_for_css_preprocessor_1024x512.jpg"><meta property="og:image" content="https://blog.itsail.ru/assets/images/2019/organization_code_for_css_preprocessor_700x500.jpg"><meta name="twitter:image" content="https://blog.itsail.ru/assets/images/2019/organization_code_for_css_preprocessor_700x500.jpg"><body><div id="shadow"></div><header class="main-header content-wrapper"> <input type="checkbox" id="menu-checkbox" /><nav class="center-wrapper nav-main"> <a class="blog-logo" href="/">ITSail</a> <a href="/about/">Об этом блоге</a> <a href="/blog/">Блог</a> <a href="/feed.xml">RSS</a> <label for="menu-checkbox" class="toggle-button" data-open="☰" data-close="☰" onclick></label></nav></header><aside class="sidebar" role="note" style="background-image: url(/assets/images/2019/organization_code_for_css_preprocessor_index.jpg)"><div class="cover"><div class="cover-text"><div class="heading"> <a href="/blog/#Разработка">Разработка</a></div><p>Недавно прочитал статью на Frontender Magazine «организация кода для CSS препроцессоров»...</p></div></div><div id="switcher"></div></aside><main class="content-wrapper"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><h1 class="post-title" itemprop="name headline">Организация кода для CSS-препроцессора</h1><p class="post-meta"> <time datetime="2016-03-07">07-03-2016</time> &nbsp;/&nbsp; <span itemprop="author" itemscope itemtype="http://schema.org/Person"> <span itemprop="name">canonium</span> &nbsp;/&nbsp; <a itemprop="url" rel="nofollow" href="https://canonium.com/" target="_blank">Источник</a> </span> <span class="hidden" itemprop="datePublished" content="2016-03-07"></span></p><div class="post-content" itemprop="articleBody"><p>Недавно прочитал статью на Frontender Magazine «<noindex><a href="http://frontender.info/organizing-your-css-code-for-preprocessors/" target="_blank" rel="nofollow">организация кода для CSS препроцессоров</a></noindex>», в которой рассказывается о нескольких вариантах организации файловой структуры стилей в проекте, и решил поделиться своими размышлениями на эту тему. Я полагаю, что вы уже прочитали эту небольшую статью.</p><p>Окей, начнём, пожалуй с того, что я выскажу своё «фи» относительно представленных в статье архитектурах. Структуру, носящую название «функциональное разделение» сразу можно забросить, так как она представляет собой мусорку, в которой просто лежат файлы. Вариант «Катана» плох тем, что файл стилей контента будет бесконечным и не совсем ясно, как искать нужные стили. Шаблонное или страничное распределение плохо тем, что количество страниц может быть невелико, а их содержимое достигать предельных значений. Архитектура, предложенная Крисом Койером выглядит ужасно из-за того, что она олицетворяет мусорку из файлов. Коктейль «Хьюго» очень хорошо смотрится на фоне остальных решений, но страдает логикой распределения файлов по директориям. Почему страдает логикой? — вы скоро это узнаете. Относительно дополнения от Игоря Зенича я ничего сказать не могу, потому что не исповедую БЭМ-методологию.</p><p>Давайте более подробно пройдёмся по коктейлю «Хьюго». Мне непонятна логика разделения файлов препроцессора на директории. Ниже я сформировал несколько вопросов, на которые ответить себе я так и не смог:</p><ul><li>Почему файл типографики (<code class="highlighter-rouge">_typography.less</code>) находится в директории <strong>base</strong>, а файл стилей кнопок (<code class="highlighter-rouge">_buttons.less</code>) — в директории <strong>components</strong>, ведь кнопки — это базовый элемент любой страницы.<li>Почему файл глобальных констант (<code class="highlighter-rouge">_variables.less</code>) находится в директории помощников? — автор предполагает, что переменные, объявленные в этом файле являются вспомогательными, а не глобальными?<li>Почему примеси собраны в одном файле (<code class="highlighter-rouge">_mixins.less</code>), а не вынесены в отдельную директорию? Ведь на большом проекте примеси могут исчисляться десятками и иметь солидные размеры, например, если это генератор сетки.</ul><p>Как бы я улучшил коктейль «Хьюго»? — придумал свой коктейль, добавив больше логики и уделил должное внимание разбиению файлов препроцессора на директории. Итак, встречайте мои размышления на тему идеальной файловой структуры организации стилей проекта.</p><p>Просто взгляните на представленную ниже структуру и попробуйте ответить на вопрос — «куда я должен поместить файл стилей иконок?».</p><pre><code class="language-tree">├── components/
│   └── _navbar.less
├── mixins/
│   ├── _buttons.less
│   └── _clearfix.less
├── modules/
│   ├── _buttons.less
│   ├── _forms.less
│   ├── _grid.less
│   ├── _lists.less
│   ├── _normalize.less
│   ├── _scaffolding.less
│   ├── _tables.less
│   └── _typography.less
├── pages/
│   └── _home.less
├── partials/
│   ├── _footer.less
│   ├── _header.less
│   └── _main.less
├── styles.less
└── _variables.less
</code></pre><p>Если вы ответили, что файл стилей иконок нужно поместить в директорию <strong>modules</strong>, то вы уже поняли суть моей структуры. Если же нет, то будем разбираться вместе.</p><p>Но перед тем как перейти к подробному разбору структуры, я хочу сказать, что в зависимости от задач здесь могут добавляться дополнительные директории, например, такие как <strong>library</strong>, <strong>helpers</strong>, <strong>themes</strong>. Директория <strong>library</strong> появляется в том случае, если проект использует библиотеки, которые невозможно найти в bower или npm. Директория <strong>helpers</strong> добавляется, если проект требует использования помощников (выравнивание текста, отступы и т.д.). И, наконец, директорию <strong>themes</strong> следует создавать в том случае, если в проекте предусмотрены дополнительные темы.</p><p>Теперь обратимся к файлу <code class="highlighter-rouge">styles.less</code>, который является точкой входа для всех стилей. Именно на него настраивается компилятор, и именно он соединяет все файлы препроцессора воедино.</p><p>К слову, я использую плагин <noindex><a href="https://www.npmjs.com/package/less-plugin-glob" target="_blank" rel="nofollow">less-plugin-glob</a></noindex> для препроцессора Less, который позволяет импортировать файлы на основе glob-паттерна.</p><pre><code class="language-less">// Settings
@bowerDir: "bower_components";
@npmDir: "node_modules";

// Core
@import "_variables";

// Mixins
@import "mixins/**";

// Library
@import "modules/_normalize";

// Package managers
@import "@{bowerDir}/xy-flexbox/xy";

// Modules
@import "modules/!(_normalize)**";
@import "components/**";
@import "partials/**";
@import "pages/**";
</code></pre><p>Довольно легко догадаться, что файл <code class="highlighter-rouge">_variables.less</code> содержит глобальные константы. Под ними следует понимать переменные, необходимые всем модулям, компонентам или даже примесям. Однако, в этом файле не должно быть переменных, необходимых только одному компоненту или только одной теме — такие переменные описываются непосредственно в файле компонента или темы.</p><h2 id="mixins-partials-и-pages">Mixins, partials и pages</h2><p>Директория <strong>mixins</strong> содержит все примеси, используемые в проекте. В идеализированном случае, одна примесь — один файл, но никто не запрещает, допустим, написать две примеси для кнопок в одном файле.</p><p>Директория <strong>partials</strong> обычно включает в себя три файла стилей, которые стилизуют шапку (header), подвал (footer) и то, что между ними — центральную часть (main) сайта. Если вам необходимо поменять цвет фона шапки, то соответствующее свойство следует написать именно в файл <code class="highlighter-rouge">_header.less</code>, а не для каждого компонента, который используется в шапке. Точно такая же история и с подвалом, и с центральной частью.</p><p>В директорию <strong>pages</strong> складываются все файлы специфичных стилей для конкретных страниц. Так уж заведено, что каждая страница имеет уникальный для неё класс, присвоенный тегу <code class="highlighter-rouge">body</code>. Например, главная страница сайта имеет у тега <code class="highlighter-rouge">body</code> класс <code class="highlighter-rouge">page-home</code>, а страницы документации и полной версии записи (поста) имеет классы, соответственно, <code class="highlighter-rouge">page-docs</code> и <code class="highlighter-rouge">page-post</code>. Постараюсь ответить на вопрос: «что должно находиться в этих файлах?». Ответ довольно прост — специфичные для этой страницы стили, например, для изменения отображения какого-либо компонента.</p><h2 id="modules-и-components">Modules и components</h2><p>Вот мы и подошли к самому важному — <strong>модулям</strong> и <strong>компонентам</strong>.</p><p><strong>Модуль</strong> — это кирпичик, из которого строятся страницы или компоненты. Модуль включает в себя основные стили для элемента, который он пытается стилизовать. Например, файл <code class="highlighter-rouge">_buttons.less</code> стилизует кнопки и предоставляет различные вариации их отображения: цветные кнопки, групповые кнопки, кнопка как ссылка. Ещё одним примером может служить файл <code class="highlighter-rouge">_tables.less</code>, который стилизует таблицы и предоставляет, допустим, следующие их вариации: таблица с рамкой, таблица с «зеброй» и т.д.</p><p>Примеры модулей:</p><ul><li>Кнопки<li>Элементы форм<li>Таблицы<li>Простые списки<li>Типографика<li>Сетка<li>Какие-то общие стили проекта (<code class="highlighter-rouge">_scaffolding.less</code>)</ul><p>Теперь я отвечу на вопрос: «почему файл normalize находится в директории модулей?». Ответ довольно прост: потому, что ради одного файла нет смысла создавать целую директорию <strong>library</strong>, учитывая то, что этот файл может быть отредактирован (например, убраны стили по умолчанию для таблиц).</p><p><strong>Компонент</strong> — это цельный блок, из которого строится страница. Компонент включает в себя модули и, если это требуется, другие компоненты. Предполагается, что компонент независим и может быть с легкостью и без проблем с отображением, выдернут из одного контекста использования и вставлен в другой.</p><p>Такая идея используется в методологии <noindex><a href="http://rscss.io/" target="_blank" rel="nofollow">RSCSS</a></noindex> и <noindex><a href="https://ru.bem.info/method/key-concepts/#Блок" target="_blank" rel="nofollow">БЭМ-методологии</a></noindex> с той лишь разницей, что в их понимании блок — это форма, логотип, список ссылок и, наконец, глобальное меню, а здесь компонент — это нечто цельное, то есть лишь глобальное меню.</p><p>Вообще, говорить здесь о методологиях слегка неправильно, потому что мы описываем файловую структуру директории стилей, а не очередную методологию. Разумеется, вы можете создавать компоненты в бесчисленном количестве и так, как вам это удобно.</p><p>Примеры компонентов:</p><ul><li>Глобальная навигация<li>Dropdown-меню<li>Рекламные блоки<li>Подсветка кода<li>Список статей<li>Jumbotron<li>Блок социальных кнопок<li>Список категорий или тегов<li>Стилизация контента статьи</ul><p>Я бы хотел остановиться на последнем пункте немного подробнее, так как изначально можно подумать, что стилизация контента статьи предполагает под собой лишь работу с типографикой и с легкостью может перекочевать в модуль. Отчасти это так, но стилизация контента статьи предполагает под собой использование модуля «типографика» и нескольких компонентов, что соответствует описанию компонента.</p><p>Так что же с ответом на вопрос: «куда я должен поместить файл стилей иконок?». Теперь вы уже точно можете сказать, что файл стилей иконок следует поместить в директорию модулей, потому что иконка сама по себе может называться элементом, который включается и в контексте компонента, и без него.</p><h2 id="Выводы">Выводы</h2><p>В статье на Frontender Magazine в конце каждого варианта организации стилей проекта приводится список плюсов и минусов, я полагаю, что стоит постараться объективно оценить и предложенный мной вариант:</p><p><strong>Плюсы:</strong></p><ul><li>Здесь присутствует логика и смысл<li>Строгое разбиение по предназначению<li>Легко поддерживать вручную<li>Каждый файл обещает быть небольшим по объему<li>Вы всегда знаете, что класс типа .navbar можно найти в директории components/_navbar.less</ul><p><strong>Минусы:</strong></p><ul><li>Много директорий и файлов<li>Нужно думать: что есть модуль, а что есть компонент?<li>Иногда понятие компонента может быть расплывчатым</ul><a class="link-to-post" href="/blog/design-as-a-coder/"> <span class="link-to-post__next">&#10535; &nbsp;Следующая запись</span> <span class="link-to-post__title">Дизайнь как верстальщик</span> </a></div></article></main><footer class="blog-footer content-wrapper"><p>&copy; <span class="full-year"></span> ITSail</p></footer><script src="/assets/scripts/scripts.min.js"></script> <script type="text/javascript" > (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)}; m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)}) (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym"); ym(52279162, "init", { id:52279162, clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true, trackHash:true }); </script> <noscript><div><img src="https://mc.yandex.ru/watch/52279162" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
